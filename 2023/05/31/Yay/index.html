<!DOCTYPE html>
<html lang="zh-cn">


<head>
    <meta charset="UTF-8">
    
    <link rel="apple-touch-icon" sizes="76x76" href="/null">
    <link rel="icon" type="image/png" href="/null">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=5">
    <title>Yay - 知识，与你分享。</title>
    
    <meta http-equiv="Content-Security-Policy" content="upgrade-insecure-requests">
    
    
    <meta name="description" content="自己使用Manjaro做开发机,记录一下Yay工具的使用命令,不过这个也是COPY来的">
    <meta name="author" content="Yum">
    <meta name="keywords" content="">
    <meta property="og:title" content="Yay"/>
    <style>


    
    :root{
        --shadow-color: rgba(0,0,0,0.2);
        --sec-shadow: rgba(0,0,0,0.03);
        --shadow-hover-color: rgba(0,0,0,0.28);
        --first-text-color: #475b6d;
        --second-text-color: #37475b;
        --third-text-color: #858585;
        --default-text-color: #505050;
        --default-link-color: #007bff;
        --link-color: #000000;
        --second-link-color: #4F9BFA;
        --code-color:rgba(27,31,35,.05);
        --post-bkg-color: #fff;
        --page-bkg-color: #f2f5f8;
        --nav-a-hover-color: #3498db;
        --post-sec-text-color: #718096;
        --sec-bkg: #f2f5f8;
        --color-mode: 'light';
        --bkg-h: rgba(255,255,255,0.6);
        --bkg-m: #e1e4e8;
        --home-title-color: #4169E1;
        --shadow: 0 4px 10px rgba(0,2,4,0.06),0 0 1px rgba(0,2,4,0.11);
        --hr-color: #ddd;
        --bg-t: #f4f4f4;
        --nav-bkg: rgba(255,255,255,0.6);
    }

@media (prefers-color-scheme: dark) {
  :root {
    --color-mode: 'dark';
  }

  :root:not([data-theme]) {
    --first-text-color: hsla(0,0%,100%,0.92);
    --second-text-color: hsla(0,0%,100%,0.86);
    --third-text-color: #a7a9ad;
    --default-text-color: #505050;
    --default-link-color: #1589e9;
    --link-color: #000000;
    --second-link-color: #30a9de;
    --post-bkg-color: #252d38;
    --page-bkg-color: #181c27;
    --nav-a-hover-color: #3498db;
    --post-sec-text-color: #a7a9ad;
    --sec-bkg: #364151;
    --bkg-h: rgba(255,255,255,0.2);
    --bkg-m: rgba(255,255,255,0.1);
    --home-title-color: rgb(226, 82, 90);
    --code-color:#3e4b5e;
    --shadow: none;
    --hr-color: #718096;
    --bg-t: #364151;
    --nav-bkg: rgba(13,17,23,0.6);
  }
}

[data-theme='dark'] {
    --shadow-color: rgba(0,0,0,0.2);
    --shadow-hover-color: rgba(0,0,0,0.28);
    --first-text-color: hsla(0,0%,100%,0.92);
    --second-text-color: hsla(0,0%,100%,0.86);
    --third-text-color: #a7a9ad;
    --default-text-color: #505050;
    --default-link-color: #1589e9;
    --link-color: #000000;
    --second-link-color: #30a9de;
    --post-bkg-color: #252d38;
    --page-bkg-color: #181c27;
    --nav-a-hover-color: #3498db;
    --post-sec-text-color: #a7a9ad;
    --sec-bkg: #364151;
    --bkg-h: rgba(255,255,255,0.2);
    --bkg-m: rgba(255,255,255,0.1);
    --home-title-color: rgb(226, 82, 90);
    --code-color:#3e4b5e;
    --shadow: none;
    --hr-color: #718096;
    --bg-t: #364151;
    --nav-bkg: rgba(13,17,23,0.6);
}

</style>



<style>
#page-main,footer,.p-btn{
    display: none;
}
html, body {
    margin: 0;
    padding: 0;
    width: 100%;
    height: 100%;
}
body {
    background-color: var(--page-bkg-color);
    color: var(--second-text-color);
    overflow-y: scroll;
    overflow-x: hidden;
    transition: all .3s;
}
a {
    color: var(--default-link-color);
    text-decoration: none;
    background-color: transparent;
}
a:hover{
    color: var(--second-link-color);
}
.main-content,.post-card-main{
    margin: 30px;
}



@media (max-width: 410px){
    .post-card-main{
        max-width: 350px!important;
    }
}

@media (max-width: 980px){
    .post-card-main{
        max-width: 960px!important;
    }
}


@media (min-width: 780px){ 
    h3{
        font-size: 1.5rem;
        line-height: 1.5em;
    }
}
@media (min-width: 1280px){ 
    h3{
        font-size: 1.7rem;
        line-height: 1.5em;
    }
}
@media (min-width: 2096px){ 
    h3{
        font-size: 1.8rem;
        line-height: 1.5em;
    }
}

.text-center{
    text-align: center!important;
}
.middle-center{
    display: -webkit-box;
    display: -ms-flexbox;
    display: flex;
    -webkit-box-align: center;
    -ms-flex-align: center;
    align-items: center;
    -webkit-box-pack: center;
    -ms-flex-pack: center;
    justify-content: center;
    height: 100%;
}
header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    position: fixed;
    height: 54px;
    padding: 0 1.25rem;
    top: 0;
    left: 0;
    right: 0;
    z-index: 10;
    border-bottom: 1px solid var(--bkg-m);
    background-color: var(--nav-bkg);
    backdrop-filter: blur(4px);
    transition: all .3s;
}
header .header__left, header .header__right {
    display: flex;
    align-items: center;
    font-family: rubik,sans-serif,Varela Round;
}
header .header__left .logo__text {
    font-size: 18px;
    font-weight: 450;
    padding: 14.5px 10px;
    border-radius: 5px;
    color: var(--second-text-color);
}
header .header__right .navbar__menus {
    height: 54px;
    padding: 0 0 0 15px;
}
header .header__right .button {
    color: var(--second-text-color);
}
header .header__right .navbar__menus .navbar-menu {
    display: inline-block;
    align-items: center;
    height: 54px;
    padding: 0 10px;
    font-size: 16px;
    line-height: 54px;
}
header .header__right .dropdown-icon {
    display: none;
    height: 54px;
    padding: 15px 10px;
    border: 0;
    background-color: transparent;
}
header .header__right .dropdown-menus {
    line-height: 2rem;
    animation: slide-in .15s ease 1;
    display: none;
    position: absolute;
    left: 12px;
    right: 12px;
    top: calc(54px + 10px);
    border-radius: 6px;
    padding: 24px;
    background-color: var(--page-bkg-color);
    border: 1px solid var(--bkg-m);
    z-index: 9999;
    justify-items: center;
    justify-content: center;
    flex-direction: column;
}
header .header__right #btn-search, header .header__right #btn-toggle-dark{
    display: inline-block;
    padding:  18px 10px;
    height: 25px;
}
header .header__right #btn-dropdown{
  display: inline-block;
  padding:  13.5px 0;
}
header .header__right .dropdown-menus .dropdown-menu {
    padding: 10px;
    color: var(--second-text-color);
}
@media screen and (max-width: 764px){
.navbar__menus {
    display: none!important;
}
.dropdown-icon {
    display: inline-block!important;
}
}
.p-btn{
    position: fixed;
    bottom: 1.2rem;
    right: 1.2rem;
    contain: layout;
}
.toc-btn,.click-btn{
    cursor: pointer;
    -webkit-appearance: none;
    -moz-appearance: none;
    appearance: none;
    align-items: center;
    margin-top: .5rem;
    font-size: .75rem;
    background-color: var(--sec-bkg);
    display: block;
    padding: 0.9rem;
    box-shadow: 0 0.3rem 0.6rem rgba(48,55,66,.15);
    border: none;
    border-radius: 0.5rem;
    line-height: 1;
    color: var(--first-text-color);
}
.toc-link{
    color: var(--second-text-color);
}

#css-loading h3{
    font-weight: 500;
    font-size: 1.4rem;
    text-align: center;
    position: fixed;
    top: 200px;
    left: 0;
    right: 0;
    opacity: 0;
    animation: cssLoad;
    animation-delay: 0.3s;
    -webkit-animation: cssLoad;
    -webkit-animation-delay: 0.3s;
}
@keyframes cssLoad {
    from {
        opacity: 0;
    }
    to {
        opacity: 0.9;
    }
}


.memorial {
    -webkit-filter: grayscale(100%);
    -moz-filter: grayscale(100%);
    -ms-filter: grayscale(100%);
    -o-filter: grayscale(100%);
    filter: grayscale(100%);
    filter:progid:DXImageTransform.Microsoft.BasicImage(grayscale=1); filter:gray;
}


    .post-copyright:after {
        position: absolute;
        color: #fff;
        background: url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 496 512'%3E%3Cpath fill='gray' d='M245.8 214.9l-33.2 17.3c-9.4-19.6-25.2-20-27.4-20-22.2 0-33.3 14.6-33.3 43.9 0 23.5 9.2 43.8 33.3 43.8 14.4 0 24.6-7 30.5-21.3l30.6 15.5a73.2 73.2 0 01-65.1 39c-22.6 0-74-10.3-74-77 0-58.7 43-77 72.6-77 30.8-.1 52.7 11.9 66 35.8zm143 0l-32.7 17.3c-9.5-19.8-25.7-20-27.9-20-22.1 0-33.2 14.6-33.2 43.9 0 23.5 9.2 43.8 33.2 43.8 14.5 0 24.7-7 30.5-21.3l31 15.5c-2 3.8-21.3 39-65 39-22.7 0-74-9.9-74-77 0-58.7 43-77 72.6-77C354 179 376 191 389 214.8zM247.7 8C104.7 8 0 123 0 256c0 138.4 113.6 248 247.6 248C377.5 504 496 403 496 256 496 118 389.4 8 247.6 8zm.8 450.8c-112.5 0-203.7-93-203.7-202.8 0-105.5 85.5-203.3 203.8-203.3A201.7 201.7 0 01451.3 256c0 121.7-99.7 202.9-202.9 202.9z'/%3E%3C/svg%3E");
        content: ' ';
        height: 10rem;
        width: 10rem;
        right: -2rem;
        top: -2rem;
        opacity: .1;
    }

</style>

    

    
        <!--
        <link rel="stylesheet" href="/css/page.css" media="print"
            onload="this.media='all';this.onload=null">
        <noscript>-->
            <link rel="stylesheet" href="/css/page.css">
        <!--</noscript>-->
    
    
    <link rel="stylesheet" href="/css/main.css" media="print" onload="this.media='all';this.onload=null">
    <noscript>
        <link rel="stylesheet" href="/css/main.css">
    </noscript>

    
    <script src="/js/main.js"></script>
    
<meta name="generator" content="Hexo 6.3.0"></head>

    <body>
        <header>
            
<div class="header__left">
	<a href="/" class="button"><span class="logo__text">我的笔记</span></a>
</div>
<div class="header__right">
	<div class="navbar__menus">
		
	</div>
	
	<a href="/search/" class="button">
		<div id="btn-search">
			<svg xmlns="http://www.w3.org/2000/svg" viewbox="0 0 1024 1024" width="24" height="24" fill="currentColor"
				stroke="currentColor" stroke-width="32">
				<path
					d="M192 448c0-141.152 114.848-256 256-256s256 114.848 256 256-114.848 256-256 256-256-114.848-256-256z m710.624 409.376l-206.88-206.88A318.784 318.784 0 0 0 768 448c0-176.736-143.264-320-320-320S128 271.264 128 448s143.264 320 320 320a318.784 318.784 0 0 0 202.496-72.256l206.88 206.88 45.248-45.248z">
				</path>
			</svg>
		</div>
	</a>
	
	<a href="javaScript:void(0);" class="button" id="btn-toggle-dark">
		<div>
			<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewbox="0 0 24 24" fill="none"
				stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
				<path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"></path>
			</svg>
		</div>
	</a>
	<a href="javaScript:void(0);" class="dropdown-icon button">
		<div id="btn-dropdown">
			<svg xmlns="http://www.w3.org/2000/svg" viewbox="0 0 1024 1024" width="24" height="24" fill="currentColor"
				stroke="currentColor" stroke-width="32" stroke-linecap="round">
				<path
					d="M903.43 561.52H148.8c-13.25 0-24-10.75-24-24s10.75-24 24-24h754.63c13.25 0 24 10.75 24 24s-10.75 24-24 24zM903.43 204.31H148.8c-13.25 0-24-10.75-24-24s10.75-24 24-24h754.63c13.25 0 24 10.75 24 24s-10.75 24-24 24zM903.43 918.73H148.8c-13.25 0-24-10.75-24-24s10.75-24 24-24h754.63c13.25 0 24 10.75 24 24s-10.75 24-24 24z"
					fill="currentColor"></path>
			</svg>
		</div>
	</a>
	<div class="dropdown-menus" id="dropdown-menus">
		
	</div>
</div>

        </header>
        <div id="top"></div>
        <div id="page-main" class="main-content">
        <div class="mg-top">
            

<article class="page">
<div id="post-meta-m">
    <div class="post-meta" id="post-meta">
  <h3>Yay</h3>
    
      <span class="post-meta-label">
        Yum
      </span>
    
    
      <span class="post-meta-label">
        <span class="p-dot"></span>
        <time datetime="2023-05-31 12:43" pubdate>
          2023-05-31
        </time>
      </span>
    
    
      
      <span class="post-meta">
        <span class="p-dot"></span>
        共 3.8k 字
      </span>
    
    
    
  </div>
  
</div>
<div class="article-m">
  <div class="post-toc">
    
      <ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E2%80%9C%E5%9F%BA%E6%9C%AC%E7%94%A8%E6%B3%95%E2%80%9D-%E5%9F%BA%E6%9C%AC%E7%94%A8%E6%B3%95"><span class="toc-number">1.</span> <span class="toc-text">“基本用法”)基本用法[]</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#yay"><span class="toc-number">1.1.</span> <span class="toc-text">yay</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#yay-foo"><span class="toc-number">1.2.</span> <span class="toc-text">yay foo</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#yay-lt-operation-gt-options-targets"><span class="toc-number">1.3.</span> <span class="toc-text">yay &lt;operation&gt; [options] [targets]</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#Y-yay"><span class="toc-number">1.3.1.</span> <span class="toc-text">-Y (--yay)</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#%E2%80%93gendb-96"><span class="toc-number">1.3.1.1.</span> <span class="toc-text">–gendb&#96;</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#c%EF%BC%88-clean%EF%BC%89"><span class="toc-number">1.3.1.2.</span> <span class="toc-text">-c（--clean）</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#P-show"><span class="toc-number">1.3.2.</span> <span class="toc-text">-P(--show)</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#c-complete"><span class="toc-number">1.3.2.1.</span> <span class="toc-text">-c(--complete)</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#f-fish"><span class="toc-number">1.3.2.2.</span> <span class="toc-text">-f(--fish)</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#d-defaultconfig"><span class="toc-number">1.3.2.3.</span> <span class="toc-text">-d(--defaultconfig)</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#g-currentconfig"><span class="toc-number">1.3.2.4.</span> <span class="toc-text">-g(--currentconfig)</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#n-numberupgrades"><span class="toc-number">1.3.2.5.</span> <span class="toc-text">-n(--numberupgrades)</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#s-stats"><span class="toc-number">1.3.2.6.</span> <span class="toc-text">-s(--stats)</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#u-upgrades"><span class="toc-number">1.3.2.7.</span> <span class="toc-text">-u(--upgrades)</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#w-news"><span class="toc-number">1.3.2.8.</span> <span class="toc-text">-w(--news)</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#q-quiet"><span class="toc-number">1.3.2.9.</span> <span class="toc-text">-q(--quiet)</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#G-getpkgbuild"><span class="toc-number">1.3.3.</span> <span class="toc-text">-G(--getpkgbuild)</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#f-force"><span class="toc-number">1.3.3.1.</span> <span class="toc-text">-f(--force)</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#p-print"><span class="toc-number">1.3.3.2.</span> <span class="toc-text">-p(--print)</span></a></li></ol></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#pacman-%E6%8B%93%E5%B1%95%E7%94%A8%E6%B3%95"><span class="toc-number">1.4.</span> <span class="toc-text">pacman 拓展用法</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#S"><span class="toc-number">1.4.1.</span> <span class="toc-text">-S</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#S-Si-Sl-Ss-Su-Sc-Qu"><span class="toc-number">1.4.1.1.</span> <span class="toc-text">-S, -Si, -Sl, -Ss, -Su, -Sc, -Qu</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#Sc"><span class="toc-number">1.4.2.</span> <span class="toc-text">-Sc</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%85%A8%E5%B1%80%E7%9A%84-options"><span class="toc-number">1.4.3.</span> <span class="toc-text">全局的[options]</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#a-aur"><span class="toc-number">1.4.3.1.</span> <span class="toc-text">-a(--aur)</span></a></li></ol></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E9%85%8D%E7%BD%AE%E8%AE%BE%E7%BD%AE"><span class="toc-number">2.</span> <span class="toc-text">配置设置</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%87%AA%E5%AE%9A%E4%B9%89%E8%B0%83%E7%94%A8%E5%91%BD%E4%BB%A4%E5%9E%8B"><span class="toc-number">2.1.</span> <span class="toc-text">自定义调用命令型</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#editor-lt-command-gt"><span class="toc-number">2.1.0.1.</span> <span class="toc-text">--editor &lt;command&gt;</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#pacman-lt-command-gt"><span class="toc-number">2.1.0.2.</span> <span class="toc-text">--pacman &lt;command&gt;</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#tar-lt-command-gt"><span class="toc-number">2.1.0.3.</span> <span class="toc-text">--tar &lt;command&gt;</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#git-lt-command-gt"><span class="toc-number">2.1.0.4.</span> <span class="toc-text">--git &lt;command&gt;</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#gpg-lt-command-gt"><span class="toc-number">2.1.0.5.</span> <span class="toc-text">--gpg &lt;command&gt;</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#sudo-lt-command-gt"><span class="toc-number">2.1.0.6.</span> <span class="toc-text">--sudo &lt;command&gt;</span></a></li></ol></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%87%AA%E5%AE%9A%E4%B9%89%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6%E5%9E%8B"><span class="toc-number">2.2.</span> <span class="toc-text">自定义配置文件型</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#config-lt-file-gt"><span class="toc-number">2.2.0.1.</span> <span class="toc-text">--config &lt;file&gt;</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#makepkgconf-lt-file-gt"><span class="toc-number">2.2.0.2.</span> <span class="toc-text">--makepkgconf &lt;file&gt;</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#nomakepkgconf"><span class="toc-number">2.2.0.3.</span> <span class="toc-text">--nomakepkgconf</span></a></li></ol></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%87%AA%E5%AE%9A%E4%B9%89%E8%B7%AF%E5%BE%84%E7%B1%BB%E5%9E%8B"><span class="toc-number">2.3.</span> <span class="toc-text">自定义路径类型</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#builddir-lt-dir-gt"><span class="toc-number">2.3.0.1.</span> <span class="toc-text">--builddir &lt;dir&gt;</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#absdir-lt-dir-gt"><span class="toc-number">2.3.0.2.</span> <span class="toc-text">--absdir &lt;dir&gt;</span></a></li></ol></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%8F%82%E6%95%B0%E4%BC%A0%E9%80%92%E5%9E%8B"><span class="toc-number">2.4.</span> <span class="toc-text">参数传递型</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#editorflags-lt-flags-gt"><span class="toc-number">2.4.0.1.</span> <span class="toc-text">--editorflags &lt;flags&gt;</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#mflags-lt-flags-gt"><span class="toc-number">2.4.0.2.</span> <span class="toc-text">--mflags &lt;flags&gt;</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#gpgflags-lt-flags-gt"><span class="toc-number">2.4.0.3.</span> <span class="toc-text">--gpgflags &lt;flags&gt;</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#sudoflags-lt-flags-gt"><span class="toc-number">2.4.0.4.</span> <span class="toc-text">--sudoflags &lt;flags&gt;</span></a></li></ol></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%8F%9C%E5%8D%95%E9%85%8D%E7%BD%AE%E5%9E%8B"><span class="toc-number">2.5.</span> <span class="toc-text">菜单配置型</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#clean%E8%8F%9C%E5%8D%95"><span class="toc-number">2.5.1.</span> <span class="toc-text">clean菜单</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#cleanmenu"><span class="toc-number">2.5.1.1.</span> <span class="toc-text">--cleanmenu</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#nocleanmenu"><span class="toc-number">2.5.1.2.</span> <span class="toc-text">--nocleanmenu</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#answerclean"><span class="toc-number">2.5.1.3.</span> <span class="toc-text">--answerclean</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#noanswerclean"><span class="toc-number">2.5.1.4.</span> <span class="toc-text">--noanswerclean</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#diff%E8%8F%9C%E5%8D%95"><span class="toc-number">2.5.2.</span> <span class="toc-text">diff菜单</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#diffmenu"><span class="toc-number">2.5.2.1.</span> <span class="toc-text">--diffmenu</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#nodiffmenu"><span class="toc-number">2.5.2.2.</span> <span class="toc-text">--nodiffmenu</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#answerdiff"><span class="toc-number">2.5.2.3.</span> <span class="toc-text">--answerdiff</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#noanswerdiff"><span class="toc-number">2.5.2.4.</span> <span class="toc-text">--noanswerdiff</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#edit%E8%8F%9C%E5%8D%95"><span class="toc-number">2.5.3.</span> <span class="toc-text">edit菜单</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#noeditmenu"><span class="toc-number">2.5.3.1.</span> <span class="toc-text">--noeditmenu</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#answeredit"><span class="toc-number">2.5.3.2.</span> <span class="toc-text">--answeredit</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#noansweredit"><span class="toc-number">2.5.3.3.</span> <span class="toc-text">--noansweredit</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#upgrade%E8%8F%9C%E5%8D%95"><span class="toc-number">2.5.4.</span> <span class="toc-text">upgrade菜单</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#upgrademenu"><span class="toc-number">2.5.4.1.</span> <span class="toc-text">--upgrademenu</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#noupgrademenu"><span class="toc-number">2.5.4.2.</span> <span class="toc-text">--noupgrademenu</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#answerupgrade"><span class="toc-number">2.5.4.3.</span> <span class="toc-text">--answerupgrade</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#noanswerupgrade"><span class="toc-number">2.5.4.4.</span> <span class="toc-text">--noanswerupgrade</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#removemake%E8%8F%9C%E5%8D%95"><span class="toc-number">2.5.5.</span> <span class="toc-text">removemake菜单</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#askremovemake"><span class="toc-number">2.5.5.1.</span> <span class="toc-text">--askremovemake</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#removemake"><span class="toc-number">2.5.5.2.</span> <span class="toc-text">--removemake</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#noremovemake"><span class="toc-number">2.5.5.3.</span> <span class="toc-text">--noremovemake</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#provides%E8%8F%9C%E5%8D%95"><span class="toc-number">2.5.6.</span> <span class="toc-text">provides菜单</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#provides"><span class="toc-number">2.5.6.1.</span> <span class="toc-text">[--provides</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#noprovides"><span class="toc-number">2.5.6.2.</span> <span class="toc-text">--noprovides</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#pgpfetch%E8%8F%9C%E5%8D%95"><span class="toc-number">2.5.7.</span> <span class="toc-text">pgpfetch菜单</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#pgpfetch"><span class="toc-number">2.5.7.1.</span> <span class="toc-text">--pgpfetch</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#nopgpfetch"><span class="toc-number">2.5.7.2.</span> <span class="toc-text">--nopgpfetch</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#useask%E9%80%89%E9%A1%B9"><span class="toc-number">2.5.8.</span> <span class="toc-text">useask选项</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#useask"><span class="toc-number">2.5.8.1.</span> <span class="toc-text">--useask</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#nouseask"><span class="toc-number">2.5.8.2.</span> <span class="toc-text">--nouseask</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#combinedupgrade%E8%8F%9C%E5%8D%95"><span class="toc-number">2.5.9.</span> <span class="toc-text">combinedupgrade菜单</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#combinedupgrade"><span class="toc-number">2.5.9.1.</span> <span class="toc-text">--combinedupgrade</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#nocombinedupgrade"><span class="toc-number">2.5.9.2.</span> <span class="toc-text">--nocombinedupgrade</span></a></li></ol></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#T-or-F-%E5%9E%8B"><span class="toc-number">2.6.</span> <span class="toc-text">T or F 型</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#devel"><span class="toc-number">2.6.1.</span> <span class="toc-text">devel</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#devel-1"><span class="toc-number">2.6.1.1.</span> <span class="toc-text">--devel</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#nodevel"><span class="toc-number">2.6.1.2.</span> <span class="toc-text">--nodevel</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#timeupdate"><span class="toc-number">2.6.2.</span> <span class="toc-text">timeupdate</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#timeupdate-1"><span class="toc-number">2.6.2.1.</span> <span class="toc-text">--timeupdate</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#notimeupdate"><span class="toc-number">2.6.2.2.</span> <span class="toc-text">--notimeupdate</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#redownload"><span class="toc-number">2.6.3.</span> <span class="toc-text">redownload</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#redownload-1"><span class="toc-number">2.6.3.1.</span> <span class="toc-text">--redownload</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#redownloadall"><span class="toc-number">2.6.3.2.</span> <span class="toc-text">--redownloadall</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#noredownload"><span class="toc-number">2.6.3.3.</span> <span class="toc-text">--noredownload</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#rebuild"><span class="toc-number">2.6.4.</span> <span class="toc-text">rebuild</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#rebuild-1"><span class="toc-number">2.6.4.1.</span> <span class="toc-text">--rebuild</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#rebuildall"><span class="toc-number">2.6.4.2.</span> <span class="toc-text">--rebuildall</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#rebuildtree"><span class="toc-number">2.6.4.3.</span> <span class="toc-text">--rebuildtree</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#norebuild"><span class="toc-number">2.6.4.4.</span> <span class="toc-text">--norebuild</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#sudoloop"><span class="toc-number">2.6.5.</span> <span class="toc-text">sudoloop</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#sudoloop-1"><span class="toc-number">2.6.5.1.</span> <span class="toc-text">--sudoloop</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#nosudoloop"><span class="toc-number">2.6.5.2.</span> <span class="toc-text">--nosudoloop</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#batchinstall"><span class="toc-number">2.6.6.</span> <span class="toc-text">batchinstall</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#batchinstall-1"><span class="toc-number">2.6.6.1.</span> <span class="toc-text">--batchinstall</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#nobatchinstall"><span class="toc-number">2.6.6.2.</span> <span class="toc-text">--nobatchinstall</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#clearafter"><span class="toc-number">2.6.7.</span> <span class="toc-text">clearafter</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#cleanafter"><span class="toc-number">2.6.7.1.</span> <span class="toc-text">--cleanafter</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#nocleanafter"><span class="toc-number">2.6.7.2.</span> <span class="toc-text">--nocleanafter</span></a></li></ol></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%85%B6%E4%BB%96%E5%9E%8B"><span class="toc-number">2.7.</span> <span class="toc-text">其他型</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#save"><span class="toc-number">2.7.0.1.</span> <span class="toc-text">--save</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#aururl"><span class="toc-number">2.7.0.2.</span> <span class="toc-text">--aururl</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#sortby"><span class="toc-number">2.7.0.3.</span> <span class="toc-text">--sortby</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#searchby"><span class="toc-number">2.7.0.4.</span> <span class="toc-text">--searchby</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#topdown"><span class="toc-number">2.7.0.5.</span> <span class="toc-text">--topdown</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#bottomup"><span class="toc-number">2.7.0.6.</span> <span class="toc-text">--bottomup</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#requestsplitn-lt-number-gt"><span class="toc-number">2.7.0.7.</span> <span class="toc-text">--requestsplitn &lt;number&gt;</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#completioninterval-lt-days-gt"><span class="toc-number">2.7.0.8.</span> <span class="toc-text">--completioninterval &lt;days&gt;</span></a></li></ol></li></ol></li></ol></li></ol>
    
  </div>
    <div id="article">
      <div id="post-content" class="markdown-body textretty">
        <blockquote>
<p>yay是一个AUR Helper，他可以执行pacman的几乎所有操作，并在此基础上添加了很多额外用法。</p>
<p>我没有在网络上查找到关于yay的、除了pacman基础用法和安装AUR包以外的中文教程，英文的也几乎没有看到，这也是我写这篇文章的原因所在。</p>
<p>本文通篇详讲yay的每一个设置&#x2F;选项（大概就是archwiki那种干涩的行文思路），最后会给出我自己的一些常用命令，但不会做解释。</p>
<p>写作时参考了yay的英文使用手册，如果你的arch安装了yay，那么即可通过<code>man yay</code>命令随时查阅它。</p>
</blockquote>
<p><strong>Tips1: 本文中出现的foo一般是指包名，标注*的表示该选项默认启用。</strong></p>
<p><strong>Tips2: 使用电脑端的访客可以在侧栏以获取目录。</strong></p>
<h2 id="“基本用法”-基本用法"><a href="#“基本用法”-基本用法" class="headerlink" title="“基本用法”)基本用法[]"></a>“基本用法”)基本用法[]</h2><p>yay的基本用法是<code>yay &lt;operation&gt; [options] [targets]</code>、<code>yay foo</code>和<code>yay</code>，<code>yay &lt;operation&gt; [options] [targets]</code>的用法可以讨论的点比较多，我会在后文中一一道来。</p>
<h3 id="yay"><a href="#yay" class="headerlink" title="yay"></a><code>yay</code></h3><p>当我们仅执行<code>yay</code>，后面不跟任何参数时，yay会执行操作<code>yay -Syu</code>，他会先调用pacman更新源的数据库、更新所有从源内安装的软件包，并检查你的AUR包有没有更新。</p>
<h3 id="yay-foo"><a href="#yay-foo" class="headerlink" title="yay foo"></a><code>yay foo</code></h3><p>通过yay后面直接跟包名的命令会让yay直接在源和AUR内搜索带有<code>foo</code>关键词的包（包名和简介中只要出现foo都会被一网打尽），以下是我执行<code>yay dingtalk</code>的输出</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">5 aur/com.dingtalk.deepin 5.0.15deepin7-1 (+0 0.00)  </span><br><span class="line">Deepin Wine dingtalk  </span><br><span class="line">4 aur/deepin.com.dingtalk.com 5.1.28.12-2 (+1 0.12)  </span><br><span class="line">DingTalk Client on Deepin Wine  </span><br><span class="line">3 aur/dingtalk 2.1.3-1 (+3 0.00)  </span><br><span class="line">钉钉桌面版，基于electron和钉钉网页版开发，支持Windows、Linux和macOS  </span><br><span class="line">2 aur/dingtalk-linux 3.5.5-1 (+6 0.12)  </span><br><span class="line">May be the official Linux experimental version  </span><br><span class="line">1 aur/dingtalk-electron 2.1.9-1 (+9 0.15)  </span><br><span class="line">钉钉Linux版本  </span><br><span class="line">==&gt; Packages to install (eg: 1 2 3, 1-3 or ^4)  </span><br><span class="line">==</span><br></pre></td></tr></table></figure>

<p>输入每一项对应的序号即可进入相应的安装过程。</p>
<h3 id="yay-lt-operation-gt-options-targets"><a href="#yay-lt-operation-gt-options-targets" class="headerlink" title="yay &lt;operation&gt; [options] [targets]"></a><code>yay &lt;operation&gt; [options] [targets]</code></h3><p>在这里，<operation>每次只能有一个，[options]和[targets]可以有多个，且多个[options]可以合起来写在一起。比如<code>yay -P -s -f</code>可以直接写成<code>yay -Psf</code>，顺序也可以颠倒，<code>-Psf</code>和<code>-sPf</code>没区别。</p>
<h4 id="Y-yay"><a href="#Y-yay" class="headerlink" title="-Y (--yay)"></a><code>-Y (--yay)</code></h4><p>-Y行为其实是yay的默认行为，当你没有加其他的行为参数时，yay就会执行-Y参数，可以跟<code>--gendb</code>和<code>-c</code>。</p>
<h5 id="–gendb-96"><a href="#–gendb-96" class="headerlink" title="–gendb&#96;"></a>–gendb&#96;</h5><p>生成AUR数据库。<strong>仅当从另一个AUR Helper迁移到yay时，才应使用此选项。</strong>（根据我的个人理解，是根据你Arch内安装的源内找不到的包的包名去AUR里寻找对应的PKGBUILD，并且把能找到的PKGBUILD给clone到<code>~/.cache/yay/</code>目录下）</p>
<p>千玄子大佬说：“简单说来就是把在 AUR 的 PKGBUILD 下下来然后比对是否要更新。”</p>
<h5 id="c（-clean）"><a href="#c（-clean）" class="headerlink" title="-c（--clean）"></a><code>-c（--clean）</code></h5><p>清除不再需要的、没有被依赖的包。（相当于apt中的autoremove）</p>
<h4 id="P-show"><a href="#P-show" class="headerlink" title="-P(--show)"></a><code>-P(--show)</code></h4><p>执行特定的Print操作。可以跟的[option]有<code>-c、-f、-d、-g、-n、-s、-u、-w、-q</code></p>
<h5 id="c-complete"><a href="#c-complete" class="headerlink" title="-c(--complete)"></a><code>-c(--complete)</code></h5><p>Print所有源内和AUR软件包的列表。这是给命令行操作提供的，并不打算由用户直接使用。（意思是启用了这个选项以后你的终端会出现一大串长常的列表来告诉你你的Arch到底可以从哪里安装哪些包，并不是直接给你用的，是作为数据留给别的命令来玩耍的）</p>
<h5 id="f-fish"><a href="#f-fish" class="headerlink" title="-f(--fish)"></a><code>-f(--fish)</code></h5><p>在输出结果到终端时，会专门为fish用户做微调。（但是根据SamLukeYes大佬说他用fish体验下来并没有感知到加不加有什么区别，应该是属于感知不强的选项）</p>
<h5 id="d-defaultconfig"><a href="#d-defaultconfig" class="headerlink" title="-d(--defaultconfig)"></a><code>-d(--defaultconfig)</code></h5><p>Print默认的yay配置。</p>
<h5 id="g-currentconfig"><a href="#g-currentconfig" class="headerlink" title="-g(--currentconfig)"></a><code>-g(--currentconfig)</code></h5><p>Print当前的yay配置。</p>
<h5 id="n-numberupgrades"><a href="#n-numberupgrades" class="headerlink" title="-n(--numberupgrades)"></a><code>-n(--numberupgrades)</code></h5><p>数一数你现在还有多少AUR包待更新。yay作者不推荐你使用呢，他推荐你用<code>yay -Qu</code>或者<code>wc -l</code>来代替它。</p>
<h5 id="s-stats"><a href="#s-stats" class="headerlink" title="-s(--stats)"></a><code>-s(--stats)</code></h5><p>会展示一大堆信息，如下</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[zhullyb@Archlinux ~]$ yay -Ps==&gt; Yay version v10.2.0							    #yay版本=============================================&gt; Total installed packages: 1240				    #总共安装了多少包==&gt; Total foreign installed packages: 24		    #多少包不是从源里安装的==&gt; Explicitly installed packages: 271			    #有多少包是你自己主动安装的(而不是作为依赖安装的)==&gt; Total Size occupied by packages: 14.3 GiB	    #安装的所有包合在一起一共占了你多少空间=============================================&gt; Ten biggest packages:						    #十个体积最大的包wps-office-cn: 990.9 MiBttf-sarasa-gothic: 855.5 MiBlinux-firmware: 652.3 MiBbaidunetdisk-bin: 494.7 MiBcom.antutu.benchmark: 412.0 MiBwine: 402.2 MiBlinux-xanmod-cacule-uksm-cjktty: 324.4 MiBmicrosoft-edge-dev-bin: 316.4 MiBwine-mono: 316.2 MiBdeepin-wine5-i386: 259.5 MiB===========================================:: Querying AUR... -&gt; Missing AUR Packages:  zhullyb-archlinux-git    #AUR里找不到的包 -&gt; Flagged Out Of Date AUR Packages:  xml2		    #AUR中被人标注过期的包</span><br></pre></td></tr></table></figure>

<h5 id="u-upgrades"><a href="#u-upgrades" class="headerlink" title="-u(--upgrades)"></a><code>-u(--upgrades)</code></h5><p>展示你所有待更新的包。</p>
<h5 id="w-news"><a href="#w-news" class="headerlink" title="-w(--news)"></a><code>-w(--news)</code></h5><p>展示来自archlinux.org的新闻。需要注意的是，这里的新闻是具有时效性的，只有在你的Arch最后一次更新以后发出来的新闻才会被显示出来。如果你不想要yay判断新闻时效性，你可以通过<code>yay -Pww</code>（即两个<code>w</code>）来获取所有能获得的新闻。</p>
<h5 id="q-quiet"><a href="#q-quiet" class="headerlink" title="-q(--quiet)"></a><code>-q(--quiet)</code></h5><p>在输出新闻的时候，仅输出新闻的标题。该功能需要与<code>-w</code>连用，即<code>yay -Pwq</code>。</p>
<h4 id="G-getpkgbuild"><a href="#G-getpkgbuild" class="headerlink" title="-G(--getpkgbuild)"></a><code>-G(--getpkgbuild)</code></h4><p>后跟包名。需要注意的是，如果指定的包不存在于官方源，则无法输出，后跟<code>-f、-p</code>参数。</p>
<p><em>如果希望仅获取来自AUR（即排除第三方源的干扰）的PKGBUILD，后需跟<code>-a</code>参数。</em></p>
<h5 id="f-force"><a href="#f-force" class="headerlink" title="-f(--force)"></a><code>-f(--force)</code></h5><p>强制下载AUR中的PKGBUILD，如果它在yay缓存目录已经存在了，那就覆盖它！</p>
<h5 id="p-print"><a href="#p-print" class="headerlink" title="-p(--print)"></a><code>-p(--print)</code></h5><p>Print指定包的PKGBUILD。</p>
<h3 id="pacman-拓展用法"><a href="#pacman-拓展用法" class="headerlink" title="pacman 拓展用法"></a>pacman 拓展用法</h3><p>yay虽然可以使用pacman的所有<operation>，但是它远不仅于此。在这一段，我将向你介绍yay中包含的那些pacman不包括的pacman &lt;operation</p>
<h4 id="S"><a href="#S" class="headerlink" title="-S"></a><code>-S</code></h4><h5 id="S-Si-Sl-Ss-Su-Sc-Qu"><a href="#S-Si-Sl-Ss-Su-Sc-Qu" class="headerlink" title="-S, -Si, -Sl, -Ss, -Su, -Sc, -Qu"></a><code>-S, -Si, -Sl, -Ss, -Su, -Sc, -Qu</code></h5><p>这些操作pacman都支持，而与pacman不同的是，yay的这些操作可以涵盖到<strong>官方源&#x2F;第三方源和AUR</strong>中的所有包。</p>
<h4 id="Sc"><a href="#Sc" class="headerlink" title="-Sc"></a><code>-Sc</code></h4><p>yay将会清除AUR包构建时的缓存和没有被track的文件。没有被track的文件在这里指AUR包构建时下载的sources或者构建完成的pkg包，但是vcs sources会被保留（比如.<code>git</code>文件夹）</p>
<h4 id="全局的-options"><a href="#全局的-options" class="headerlink" title="全局的[options]"></a>全局的[options]</h4><p>全局是指在所有<operation>下都可以加啦。</p>
<p>#####<code>--repo</code></p>
<p>假定你给出的包名只存在源里（忽视AUR的存在）</p>
<h5 id="a-aur"><a href="#a-aur" class="headerlink" title="-a(--aur)"></a><code>-a(--aur)</code></h5><p>假定你给出的包名只存在AUR中（忽视源的存在）</p>
<h2 id="配置设置"><a href="#配置设置" class="headerlink" title="配置设置"></a>配置设置</h2><p>原版的man手册排的比较混乱，我这里自己细分了几个类型，或许不是特别专业，但我希望能够帮助你们理解。</p>
<h3 id="自定义调用命令型"><a href="#自定义调用命令型" class="headerlink" title="自定义调用命令型"></a>自定义调用命令型</h3><h5 id="editor-lt-command-gt"><a href="#editor-lt-command-gt" class="headerlink" title="--editor &lt;command&gt;"></a><code>--editor &lt;command&gt;</code></h5><p>设置编辑时调用的编辑器。</p>
<p>#####<code>--makepkg &lt;command&gt;</code></p>
<p>设置makepkg时需要调用makepkg命令（一般情况下用不到）</p>
<h5 id="pacman-lt-command-gt"><a href="#pacman-lt-command-gt" class="headerlink" title="--pacman &lt;command&gt;"></a><code>--pacman &lt;command&gt;</code></h5><p>设置运行pacman时需要调用pacman命令（一般情况下用不到）</p>
<h5 id="tar-lt-command-gt"><a href="#tar-lt-command-gt" class="headerlink" title="--tar &lt;command&gt;"></a><code>--tar &lt;command&gt;</code></h5><p>设置makepkg解压tar资源时调用的tar命令（一般情况下用不到）</p>
<h5 id="git-lt-command-gt"><a href="#git-lt-command-gt" class="headerlink" title="--git &lt;command&gt;"></a><code>--git &lt;command&gt;</code></h5><p>设置makepkg clone git资源时调用的git命令（比如你可以安装AUR中的fgit-go，使用<code>--git fgit</code>参数来让fastgit代理clone的过程）</p>
<h5 id="gpg-lt-command-gt"><a href="#gpg-lt-command-gt" class="headerlink" title="--gpg &lt;command&gt;"></a><code>--gpg &lt;command&gt;</code></h5><p>设置gpg验证资源时调用的gpg命令</p>
<h5 id="sudo-lt-command-gt"><a href="#sudo-lt-command-gt" class="headerlink" title="--sudo &lt;command&gt;"></a><code>--sudo &lt;command&gt;</code></h5><p>设置调用sudo获取su权限安装pkg时所调用的sudo命令。</p>
<h3 id="自定义配置文件型"><a href="#自定义配置文件型" class="headerlink" title="自定义配置文件型"></a>自定义配置文件型</h3><h5 id="config-lt-file-gt"><a href="#config-lt-file-gt" class="headerlink" title="--config &lt;file&gt;"></a><code>--config &lt;file&gt;</code></h5><p>设置读取的pacman配置文件。</p>
<h5 id="makepkgconf-lt-file-gt"><a href="#makepkgconf-lt-file-gt" class="headerlink" title="--makepkgconf &lt;file&gt;"></a><code>--makepkgconf &lt;file&gt;</code></h5><p>设置读取的makepkg配置文件。</p>
<h5 id="nomakepkgconf"><a href="#nomakepkgconf" class="headerlink" title="--nomakepkgconf"></a><code>--nomakepkgconf</code></h5><p>不读取系统中的makepkg.conf，仅使用Arch默认状态下的配置文件。</p>
<h3 id="自定义路径类型"><a href="#自定义路径类型" class="headerlink" title="自定义路径类型"></a>自定义路径类型</h3><h5 id="builddir-lt-dir-gt"><a href="#builddir-lt-dir-gt" class="headerlink" title="--builddir &lt;dir&gt;"></a><code>--builddir &lt;dir&gt;</code></h5><p>设置build路径，默认路径为<code>~/.cache/yay/</code></p>
<h5 id="absdir-lt-dir-gt"><a href="#absdir-lt-dir-gt" class="headerlink" title="--absdir &lt;dir&gt;"></a><code>--absdir &lt;dir&gt;</code></h5><p>设置abs路径，默认路径为<code>~/.cache/yay/abs/</code></p>
<h3 id="参数传递型"><a href="#参数传递型" class="headerlink" title="参数传递型"></a>参数传递型</h3><h5 id="editorflags-lt-flags-gt"><a href="#editorflags-lt-flags-gt" class="headerlink" title="--editorflags &lt;flags&gt;"></a><code>--editorflags &lt;flags&gt;</code></h5><p>后跟需要跟随传递给编辑器的参数。如果需要传递多个参数，可以使用引号。</p>
<h5 id="mflags-lt-flags-gt"><a href="#mflags-lt-flags-gt" class="headerlink" title="--mflags &lt;flags&gt;"></a><code>--mflags &lt;flags&gt;</code></h5><p>后跟需要跟随传递给makepkg的参数。如果需要传递多个参数，可以使用引号。</p>
<p>这个用的人不多，但其实是非常好用的一个功能。在我们安装<code>deepin-wine-tim</code>等包的时候，很可能会遇到文件明明完整但checksum不通过的情况，这时我们可以跟一个<code>--skipchecksums</code>参数传递给makepkg以跳过checksum的过程。</p>
<h5 id="gpgflags-lt-flags-gt"><a href="#gpgflags-lt-flags-gt" class="headerlink" title="--gpgflags &lt;flags&gt;"></a><code>--gpgflags &lt;flags&gt;</code></h5><p>后跟需要跟随传递给pgp的参数。如果需要传递多个参数，可以使用引号。</p>
<h5 id="sudoflags-lt-flags-gt"><a href="#sudoflags-lt-flags-gt" class="headerlink" title="--sudoflags &lt;flags&gt;"></a><code>--sudoflags &lt;flags&gt;</code></h5><p>后跟需要跟随传递给sudo的参数。如果需要传递多个参数，可以使用引号。</p>
<h3 id="菜单配置型"><a href="#菜单配置型" class="headerlink" title="菜单配置型"></a>菜单配置型</h3><h4 id="clean菜单"><a href="#clean菜单" class="headerlink" title="clean菜单"></a>clean菜单</h4><h5 id="cleanmenu"><a href="#cleanmenu" class="headerlink" title="--cleanmenu"></a><code>--cleanmenu</code></h5><p>启用清除询问菜单。（询问你是否需要清除已存在的文件）</p>
<h5 id="nocleanmenu"><a href="#nocleanmenu" class="headerlink" title="--nocleanmenu"></a><code>--nocleanmenu</code></h5><p>禁用清除询问菜单。（不询问你是否需要清除已存在的文件）</p>
<h5 id="answerclean"><a href="#answerclean" class="headerlink" title="--answerclean"></a><code>--answerclean</code></h5><p>自动回答cleanmenu，后跟<code>&lt;All|None|Installed|NotInstalled&gt;</code>参数。</p>
<h5 id="noanswerclean"><a href="#noanswerclean" class="headerlink" title="--noanswerclean"></a><code>--noanswerclean</code></h5><p>不设置自动回答。</p>
<h4 id="diff菜单"><a href="#diff菜单" class="headerlink" title="diff菜单"></a>diff菜单</h4><h5 id="diffmenu"><a href="#diffmenu" class="headerlink" title="--diffmenu"></a><code>--diffmenu</code></h5><p>启用对比询问菜单。（询问你是否需要对比本地文件和AUR文件）</p>
<h5 id="nodiffmenu"><a href="#nodiffmenu" class="headerlink" title="--nodiffmenu"></a><code>--nodiffmenu</code></h5><p>禁用对比询问菜单。（不询问你是否需要对比本地文件和AUR文件）</p>
<h5 id="answerdiff"><a href="#answerdiff" class="headerlink" title="--answerdiff"></a><code>--answerdiff</code></h5><p>自动回答cleanmenu，后跟<code>&lt;All|None|Installed|NotInstalled&gt;</code>参数。</p>
<h5 id="noanswerdiff"><a href="#noanswerdiff" class="headerlink" title="--noanswerdiff"></a><code>--noanswerdiff</code></h5><p>不设置自动回答。</p>
<h4 id="edit菜单"><a href="#edit菜单" class="headerlink" title="edit菜单"></a>edit菜单</h4><p>#####<code>--editmenu</code></p>
<p>启用修改询问菜单。（询问你是否需要修改PKGBUILD以及相关文件）</p>
<h5 id="noeditmenu"><a href="#noeditmenu" class="headerlink" title="--noeditmenu"></a><code>--noeditmenu</code></h5><p>禁用修改询问菜单。（不询问你是否需要修改PKGBUILD以及相关文件）</p>
<h5 id="answeredit"><a href="#answeredit" class="headerlink" title="--answeredit"></a><code>--answeredit</code></h5><p>自动回答editmenu，后跟<code>&lt;All|None|Installed|NotInstalled&gt;</code>参数。</p>
<h5 id="noansweredit"><a href="#noansweredit" class="headerlink" title="--noansweredit"></a><code>--noansweredit</code></h5><p>不设置自动回答。</p>
<h4 id="upgrade菜单"><a href="#upgrade菜单" class="headerlink" title="upgrade菜单"></a>upgrade菜单</h4><h5 id="upgrademenu"><a href="#upgrademenu" class="headerlink" title="--upgrademenu"></a><code>--upgrademenu</code></h5><p>启用更新询问菜单。（询问你是否需要更新AUR包）</p>
<h5 id="noupgrademenu"><a href="#noupgrademenu" class="headerlink" title="--noupgrademenu"></a><code>--noupgrademenu</code></h5><p>禁用更新询问菜单。（不询问你是否需要更新AUR包）</p>
<h5 id="answerupgrade"><a href="#answerupgrade" class="headerlink" title="--answerupgrade"></a><code>--answerupgrade</code></h5><p>自动回答upgrademenu，后跟<code>&lt;All|None|Installed|NotInstalled&gt;</code>参数。</p>
<h5 id="noanswerupgrade"><a href="#noanswerupgrade" class="headerlink" title="--noanswerupgrade"></a><code>--noanswerupgrade</code></h5><p>不设置自动回答。</p>
<h4 id="removemake菜单"><a href="#removemake菜单" class="headerlink" title="removemake菜单"></a>removemake菜单</h4><h5 id="askremovemake"><a href="#askremovemake" class="headerlink" title="--askremovemake"></a><code>--askremovemake</code></h5><p>在编译结束后，询问是否删除make depend。</p>
<h5 id="removemake"><a href="#removemake" class="headerlink" title="--removemake"></a><code>--removemake</code></h5><p>在编译结束后，删除make depend。</p>
<h5 id="noremovemake"><a href="#noremovemake" class="headerlink" title="--noremovemake"></a><code>--noremovemake</code></h5><p>在编译结束后，不删除make depend。</p>
<h4 id="provides菜单"><a href="#provides菜单" class="headerlink" title="provides菜单"></a>provides菜单</h4><h5 id="provides"><a href="#provides" class="headerlink" title="[--provides"></a>[<code>--provides</code></h5><p>搜索AUR包时，一同寻找其在AUR上的依赖程序。 当找到多个提供该依赖的包时，将出现一个菜单，提示您选择一个。尽管这不会引起注意，但这会增加依赖项解决时间。</p>
<h5 id="noprovides"><a href="#noprovides" class="headerlink" title="--noprovides"></a><code>--noprovides</code></h5><p>搜索AUR包时，不在AUR上寻找其依赖程序。尽管yay不会再次弹出依赖菜单供你选择，yay调用pacman时依然会出现pacman的选择菜单让你选择。</p>
<h4 id="pgpfetch菜单"><a href="#pgpfetch菜单" class="headerlink" title="pgpfetch菜单"></a>pgpfetch菜单</h4><h5 id="pgpfetch"><a href="#pgpfetch" class="headerlink" title="--pgpfetch"></a><code>--pgpfetch</code></h5><p>询问你是否从每个PKGBUILD的validpgpkeys字段导入未知的PGP密钥。</p>
<h5 id="nopgpfetch"><a href="#nopgpfetch" class="headerlink" title="--nopgpfetch"></a><code>--nopgpfetch</code></h5><p>不自动导入陌生的PGP密钥。</p>
<h4 id="useask选项"><a href="#useask选项" class="headerlink" title="useask选项"></a>useask选项</h4><h5 id="useask"><a href="#useask" class="headerlink" title="--useask"></a><code>--useask</code></h5><p>调用pacman的–ask询问用户是否删除系统中与当前包冲突的软件包。</p>
<h5 id="nouseask"><a href="#nouseask" class="headerlink" title="--nouseask"></a><code>--nouseask</code></h5><p>不调用pacman的–ask询问用户是否删除系统中与当前包冲突的软件包，遇到冲突的软件包时直接报错，由用户来手动解决。</p>
<h4 id="combinedupgrade菜单"><a href="#combinedupgrade菜单" class="headerlink" title="combinedupgrade菜单"></a>combinedupgrade菜单</h4><h5 id="combinedupgrade"><a href="#combinedupgrade" class="headerlink" title="--combinedupgrade"></a><code>--combinedupgrade</code></h5><p>在系统更新期间，将源内包和AUR包的更新菜单合并到一起。</p>
<h5 id="nocombinedupgrade"><a href="#nocombinedupgrade" class="headerlink" title="--nocombinedupgrade"></a><code>--nocombinedupgrade</code></h5><p>在系统更新期间，先支持源内包的升级，完成后再进行AUR包的升级。</p>
<h3 id="T-or-F-型"><a href="#T-or-F-型" class="headerlink" title="T or F 型"></a>T or F 型</h3><h4 id="devel"><a href="#devel" class="headerlink" title="devel"></a>devel</h4><h5 id="devel-1"><a href="#devel-1" class="headerlink" title="--devel"></a><code>--devel</code></h5><p>在系统更新期间，检查AUR的vcs包是否有更新，当前仅支持AUR的-git包。 devel查询是使用<code>git ls-remote</code>对比安装时和现在最新的commit_id完成的。</p>
<h5 id="nodevel"><a href="#nodevel" class="headerlink" title="--nodevel"></a><code>--nodevel</code></h5><p>在系统更新期间， 不检查AUR的vcs包是否有更新。</p>
<h4 id="timeupdate"><a href="#timeupdate" class="headerlink" title="timeupdate"></a>timeupdate</h4><h5 id="timeupdate-1"><a href="#timeupdate-1" class="headerlink" title="--timeupdate"></a><code>--timeupdate</code></h5><p>在系统更新期间，将已安装软件包的构建时间与每个软件包的AUR的最后修改时间进行比较。</p>
<h5 id="notimeupdate"><a href="#notimeupdate" class="headerlink" title="--notimeupdate"></a><code>--notimeupdate</code></h5><p>在系统更新期间，不将已安装软件包的构建时间与每个软件包的AUR的最后修改时间进行比较。</p>
<h4 id="redownload"><a href="#redownload" class="headerlink" title="redownload"></a>redownload</h4><h5 id="redownload-1"><a href="#redownload-1" class="headerlink" title="--redownload"></a><code>--redownload</code></h5><p>就算PKGBUILD已经存在，也要重新从AUR上获取一份新的PKGBUILD并覆盖原有PKGBUILD。</p>
<h5 id="redownloadall"><a href="#redownloadall" class="headerlink" title="--redownloadall"></a><code>--redownloadall</code></h5><p>就算PKGBUILD已经存在，也要重新从AUR上获取所有AUR包的PKGBUILD并覆盖原有PKGBUILD。</p>
<h5 id="noredownload"><a href="#noredownload" class="headerlink" title="--noredownload"></a><code>--noredownload</code></h5><p>当下载PKGBUILD时，，如果发现cache中的PKGBUILD版本＞＝AUR上的版本时，直接使用本地的PKGBUILD。</p>
<h4 id="rebuild"><a href="#rebuild" class="headerlink" title="rebuild"></a>rebuild</h4><h5 id="rebuild-1"><a href="#rebuild-1" class="headerlink" title="--rebuild"></a><code>--rebuild</code></h5><p>即使在cache中有可用的二进制包的情况下，也始终要重新编译目标软件包。</p>
<h5 id="rebuildall"><a href="#rebuildall" class="headerlink" title="--rebuildall"></a><code>--rebuildall</code></h5><p>即使在cache中有可用的二进制包的情况下，也始终要重新编译所有的AUR包。</p>
<h5 id="rebuildtree"><a href="#rebuildtree" class="headerlink" title="--rebuildtree"></a><code>--rebuildtree</code></h5><p>安装AUR包时，以递归方式重新编译并重新安装其所有AUR依赖包，即使已安装的依赖项也是如此。 该选项使您可以轻松地针对当前系统的库重新构建软件包，如果它们变得不兼容。（比如python3.8-&gt;3.9）</p>
<h5 id="norebuild"><a href="#norebuild" class="headerlink" title="--norebuild"></a><code>--norebuild</code></h5><p>构建软件包时，如果在缓存中找到该软件包并且该软件包与想要的软件包的版本相同，则跳过软件包的编译过程并使用现有的二进制程序。</p>
<h4 id="sudoloop"><a href="#sudoloop" class="headerlink" title="sudoloop"></a>sudoloop</h4><h5 id="sudoloop-1"><a href="#sudoloop-1" class="headerlink" title="--sudoloop"></a><code>--sudoloop</code></h5><p>在后台循环调用sudo，以防止sudo授权在长时间构建期间超时。</p>
<h5 id="nosudoloop"><a href="#nosudoloop" class="headerlink" title="--nosudoloop"></a><code>--nosudoloop</code></h5><p>不在后台循环调用sudo，可能会导致sudo授权在长时间构建期间超时。</p>
<h4 id="batchinstall"><a href="#batchinstall" class="headerlink" title="batchinstall"></a>batchinstall</h4><h5 id="batchinstall-1"><a href="#batchinstall-1" class="headerlink" title="--batchinstall"></a><code>--batchinstall</code></h5><p>在构建和安装AUR包时，对每个软件包的安装进行排序，而并非在构建之后立刻安装每个软件包时。 需要注意的是，一旦构建了所有软件包，或者需要构建队列中的软件包作为构建另一个软件包的依赖项，应当在安装队列中安装所有软件包。</p>
<h5 id="nobatchinstall"><a href="#nobatchinstall" class="headerlink" title="--nobatchinstall"></a><code>--nobatchinstall</code></h5><p>在构建AUR包成功后立即安装。</p>
<h4 id="clearafter"><a href="#clearafter" class="headerlink" title="clearafter"></a>clearafter</h4><h5 id="cleanafter"><a href="#cleanafter" class="headerlink" title="--cleanafter"></a><code>--cleanafter</code></h5><p>在构建AUR包完成以后清除cache文件。</p>
<h5 id="nocleanafter"><a href="#nocleanafter" class="headerlink" title="--nocleanafter"></a><code>--nocleanafter</code></h5><p>在构建AUR包完成以后不清除cache文件。</p>
<h3 id="其他型"><a href="#其他型" class="headerlink" title="其他型"></a>其他型</h3><h5 id="save"><a href="#save" class="headerlink" title="--save"></a><code>--save</code></h5><p>把你这一次执行yay后面跟的配置参数永久保存下来。</p>
<h5 id="aururl"><a href="#aururl" class="headerlink" title="--aururl"></a><code>--aururl</code></h5><p>更改aur源地址（默认为 [<a href="https://aur.archlinux.org]），适用于中国用户，可以使用此参数将AUR的地址设置成清华的反代，具体的配置命令为">https://aur.archlinux.org]），适用于中国用户，可以使用此参数将AUR的地址设置成清华的反代，具体的配置命令为</a></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yay --aururl &quot;https://aur.tuna.tsinghua.edu.cn&quot; --save</span><br></pre></td></tr></table></figure>

<p>TUNA 的反代已经取消，可以使用如下命令设置回 AUR 官方源</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yay --aururl &quot;https://aur.archlinux.org&quot; --save</span><br></pre></td></tr></table></figure>

<h5 id="sortby"><a href="#sortby" class="headerlink" title="--sortby"></a><code>--sortby</code></h5><p>在搜索过程中，按特定条件对AUR结果进行排序，后跟<code>&lt;votes|popularity|id|baseid|name|base|submitted|modified</code>参数，默认为<code>votes</code>。</p>
<h5 id="searchby"><a href="#searchby" class="headerlink" title="--searchby"></a><code>--searchby</code></h5><p>通过指定查询类型来搜索AUR软件包，后跟<code>&lt;name|name-desc|maintainer|depends|checkdepends|makedepends|optdepends</code>参数，默认为<code>name-desc</code>。</p>
<h5 id="topdown"><a href="#topdown" class="headerlink" title="--topdown"></a><code>--topdown</code></h5><p>优先展示源内包，其次才是AUR包</p>
<h5 id="bottomup"><a href="#bottomup" class="headerlink" title="--bottomup"></a><code>--bottomup</code></h5><p>优先展示AUR包，其次才是源内包</p>
<h5 id="requestsplitn-lt-number-gt"><a href="#requestsplitn-lt-number-gt" class="headerlink" title="--requestsplitn &lt;number&gt;"></a><code>--requestsplitn &lt;number&gt;</code></h5><p>设置在每次向AUR的请求的最大数值（默认150）。数值越高，请求时间越短，但是单次请求的数值过大会导致error。当这个数值＞500时你应当特别注意这一点。</p>
<h5 id="completioninterval-lt-days-gt"><a href="#completioninterval-lt-days-gt" class="headerlink" title="--completioninterval &lt;days&gt;"></a><code>--completioninterval &lt;days&gt;</code></h5><p>刷新完成高速缓存的时间（以天为单位,默认为7）。 将此值设置为0将导致每次刷新缓存，而将其设置为-1将导致永远不刷新缓存。</p>

      </div>
    </div>
</div>

<div class="post-category">

    <div id="p-meta-i">
        
          
              
                <a class="hover-with-bg" href="/tags/Yay/"># Yay</a>
              
          
    </div>
</div>


<div class="post-footer">
  

  <div class="post-copyright">
    <p style="margin: 5px 0;">文章作者：<a href="/">Yum</a></p>
    <p style="margin: 5px 0;">文章链接：<a href="https://blog.lce.land/2023/05/31/Yay/">https://blog.lce.land/2023/05/31/Yay/</a></p>
    <p style="margin: 5px 0;">版权声明：本博客所有文章除特别声明外，均采用 <a target="_blank" href="https://creativecommons.org/licenses/by-sa/4.0/deed.zh" rel="nofollow noopener noopener">CC BY-SA 4.0 协议</a> ，转载请注明出处，谢谢。</p>
  </div>
  
</div>

</article>


        </div>
        
<footer class="text-center">
    
    
    
    
    
    <p>&copy;  2020 - 2023&nbsp;&nbsp;有限的时间卷无限的知识</p>
    
    <p>Powered by <a href="https://hexo.io" target="_blank">Hexo</a> | Theme by <a href="https://github.com/oCoke/hexo-theme-miracle" target="_blank">Miracle</a></p>
    
    
</footer>

<div class="p-btn">
    
        <a class="toc-btn" id="toc-btn"><i id="i-menu"></i></a>
    
    
      <a class="toc-btn" id="share-btn"><i>
        <svg t="1670124379155" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="2683" width="25" height="25"><path d="M395.946667 234.666667v64H256v469.333333h512V522.666667h64V768a64 64 0 0 1-64 64H256a64 64 0 0 1-64-64V298.666667a64 64 0 0 1 64-64h139.946667z m335.850666-87.914667l150.848 150.826667-158.378666 158.4-45.269334-45.248L748.394667 341.333333H672c-121.685333 0-220.714667 97.024-223.914667 217.941334L448 565.333333v85.333334h-64v-85.333334C384 406.272 512.938667 277.333333 672 277.333333h99.861333l-85.312-85.333333 45.248-45.248z" p-id="2684" fill="var(--first-text-color)"></path></svg>
      </i></a>
    
    <a href="javascript:window.scrollTo({top:0,behavior:'smooth'});" class="click-btn">
      <i id="i-up"></i>
    </a>
</div>

<!-- SCRIPTS -->






<script>
    document.getElementById("btn-dropdown").addEventListener('click', () => {
      toggleClass("#dropdown-menus","display-inline");
    });
    console.log('\n' + ' %c Powered by Hexo Theme Miracle ' + ' %c https://github.com/oCoke/hexo-theme-miracle ' + '\n' + '\n', 'color: #fff; background: #4F9BFA; padding:5px 0;', 'background: #FFF; padding:5px 0;');

    

    
  /* 小彩蛋: 饮茶先啦 */
  setTimeout(() => {
    var time = new Date();
    if (time.getHours() == 15) {
      let comment = document.createComment(' 三点几嚟！饮茶先啦！ ');
      document.body.insertBefore(comment, document.getElementsByTagName('header')[0]);
    }
  },1);
    
</script>


<script>
    var postImg = document.querySelectorAll("article[class=page] img");
    for (let imgi = 0; imgi < postImg.length; imgi++) {
        postImg[imgi].onclick = () => {
            let zoomImg = document.createElement("div");
            zoomImg.id = "zoomImg";
            zoomImg.innerHTML = `<div id="zoom-picture"></div>
    <div class="poptrox-overlay"
        style="position: fixed; left: 0px; top: 0px; z-index: 20000; width: 100%; height: 100%; text-align: center; cursor: zoom-out; opacity: 1;">
        <div style="display:inline-block;height:100%;vertical-align:middle;"></div>
        <div
            style="position:absolute;left:0;top:0;width:100%;height:100%;background:#000000;opacity:0;filter:alpha(opacity=0);">
        </div>
        <div class="poptrox-popup"
            style="display: inline-block; vertical-align: middle; position: relative; z-index: 1; cursor: zoom-out; min-width: 10px; min-height: 10px; width: auto; height: auto;">
            <div class="loader" style="display: none;"></div>
            <div class="pic" style="text-indent: 0px;"><img
                    src="${ postImg[imgi].srcset || postImg[imgi].src }" alt="Loading..."
                    style="vertical-align: bottom; max-width: 85vw; max-height: 85vh;"></div>
        </div>
    </div>`;
            document.body.appendChild(zoomImg);
                document.querySelector("#zoomImg").onclick = () => {
                    document.querySelector("#zoomImg").remove();
                }
        }
    }
    
</script>




    <script>
        query("#toc-btn")[0].onclick = () => {
            if (query(".post-toc")[0].innerHTML) {
                toggleClass(".post-toc", "display-inline");
            }
        }

        if (!query(".post-toc")[0].innerHTML) {
            addClass("#toc-btn","display-none");
        }
    </script>



    <script>
        query("#share-btn")[0].onclick = async () => {
            let url = `${location.protocol}//${location.hostname}${location.port ? ":"+location.port:location.port}${location.pathname}#read=${sessionStorage.getItem(location.pathname+"_read_y") || ""}`;
            try {
                await navigator.clipboard.writeText(url);
                prompt_core("分享链接已经复制至剪贴板", 4800, true);
            } catch(e) {
                prompt_core("分享链接复制失败，请手动复制<br/>"+url, 4800, false);
            }
        }
    </script>







    <script>
        const getScrollPosition = (el = window) => ({
            x: el.pageXOffset !== undefined ? el.pageXOffset : el.scrollLeft,
            y: el.pageYOffset !== undefined ? el.pageYOffset : el.scrollTop
        });
        // 此处的 750 是「页面元素的最大宽度」
        var wx = document.getElementsByClassName("article-m")[0].clientWidth;
        var wy = document.getElementsByClassName("article-m")[0].clientHeight;
        function windowScroll() {
            // 反复修改 确保页面尺寸不改变
            wx = document.getElementsByClassName("article-m")[0].clientWidth;
            wy = document.getElementsByClassName("article-m")[0].clientHeight;
            let y = Math.round(getScrollPosition().y);
            // console.log(y);
            // 组合字符串，同时记录页面坐标，页面宽度和高度
            let p = `${y}:${wx}:${wy}`;
            // 写入到 sessionStorage 中
            sessionStorage.setItem(location.pathname + "_read_y", p);
        }
        // URL 中是否包含传递的坐标信息
        setTimeout(() => {
            if (location.hash.split("#read=").length > 1) {
                prompt_core("已有阅读进度，正在跳转", 4800, true);
                // 分离字符串
                let read_y = location.hash.split("#read=")[1];
                read_y = read_y.split(":");
                // 组合乘积，顺滑移动至坐标
                window.scrollTo({top: Math.round(Number(read_y[0]) * Number(read_y[1] * Number(read_y[2] / wx / wy))), behavior: "smooth"});
            } else {
                // 从 sessionStorage 中获取
                let read_y = sessionStorage.getItem(location.pathname + "_read_y") || "0:0:0";
                read_y = read_y.split(":");
                if (read_y[0] != "0") prompt_core("已有阅读进度，正在跳转", 4800, true);
                window.scrollTo({top: Math.round(Number(read_y[0]) * Number(read_y[1] * Number(read_y[2] / wx / wy))), behavior: "smooth"});
            }
        }, 500);
        window.onscroll = windowScroll;
    </script>





        </div>
        <div id="css-loading">
            <h3 class="text-center">加载中...</h3>
        </div>
        
    </body>
</html>
